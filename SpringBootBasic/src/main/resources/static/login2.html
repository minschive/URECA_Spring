<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
  <h1>login2.html</h1>
<!-- Ajax 요청 -->
  <form>
    <input type="text" name="username" id="username"><br>
    <input type="text" name="password" id="password"><br>
  </form>

  <button id="btnLogin">로그인</button>

<script>
    window.onload = function () {
        document.querySelector("#btnLogin").onclick = async function () {
            let urlParams = new URLSearchParams({
                username: document.querySelector("#username").value,
                password: document.querySelector("#password").value
            });

            let fetchOption = {
                method: "POST",
                body: urlParams
            }

            let response = await fetch("/login2", fetchOption);
            let data = await response.json();
            console.log( data );

            if( data.result == "success" ) {
                // main page 로 이동
                window.location.href="/main.html"
            } else {
                alert("로그인 실패");
            }
        }
    }
</script>
</body>
</html>